- hosts: "{{ HOST_NAME }}"
  become: True
  become_user: ec2-user

  vars: 
    app_dir: /var/www/raisetech-live8-sample-app
    ruby_version: 3.2.3
    bundler_version: 2.3.14
    rails_version: 7.1.3.2
    node_version: 17.9.1
    AWS_RDS_PW: "{{ lookup('env', 'AWS_RDS_PW') }}"
    AWS_RDS_ENDPOINT: "{{ lookup('env','AWS_RDS_ENDPOINT') }}"
    AWS_S3_BUCKET: "{{ (lookup('env','AWS_S3_BUCKET')) }}"

  roles:
    - { role: app, tags: app }
    - { role: rbenv, tags: rbenv }
    - { role: node, tags: node }
    - { role: yarn, tags: yarn }
    - { role: bundler, tags: bundler }
    - { role: mysql, tags: mysql }
    - { role: nginx, tags: nginx }
    - { role: deploy, tags: deploy }

